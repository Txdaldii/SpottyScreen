<Window x:Class="SpottyScreen.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" WindowState="Maximized"
        Title="Spotty Screen"
        Background="Black" AllowsTransparency="True"
        MouseEnter="Window_MouseEnter"
        MouseLeave="Window_MouseLeave">
    
    <Window.Resources>
        <!-- Button Style for Window Controls -->
        <Style x:Key="WindowControlButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#DD1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="10">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3" Opacity="0.5"/>
                            </Border.Effect>
                            <TextBlock Text="{TemplateBinding Content}"
                                       Foreground="{TemplateBinding Foreground}"
                                       FontSize="{TemplateBinding FontSize}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF2A2A2A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid x:Name="RootGrid">
        <Border x:Name="BlurredBackground" Background="Black" BorderThickness="0"/>
        <Rectangle>
            <Rectangle.Fill>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#AA000000" Offset="0"/>
                    <GradientStop Color="#CC000000" Offset="1"/>
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>
        <Grid Margin="100">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Width="400" Height="400" CornerRadius="30" Margin="20" ClipToBounds="True">
                <Border.Background>
                    <ImageBrush x:Name="AlbumCover" Stretch="UniformToFill"/>
                </Border.Background>
            </Border>
            <Grid Grid.Column="1" Margin="40">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock x:Name="TrackName" Grid.Row="0" FontSize="48" Foreground="White" FontFamily="Segoe UI Variable" FontWeight="Bold"/>
                <TextBlock x:Name="ArtistName" Grid.Row="1" FontSize="28" Foreground="#DDDDDD" FontFamily="Segoe UI Variable"/>
                <TextBlock x:Name="AlbumName" Grid.Row="2" FontSize="24" Foreground="#AAAAAA" FontFamily="Segoe UI Variable" Margin="0,0,0,40"/>
                <ScrollViewer Grid.Row="3" x:Name="LyricsScrollViewer"
                              VerticalScrollBarVisibility="Hidden"
                              HorizontalScrollBarVisibility="Hidden"
                              IsHitTestVisible="False">
                    <StackPanel x:Name="LyricsPanel"/>
                </ScrollViewer>
            </Grid>
        </Grid>

        <!-- Progress Bar Section with Time Labels -->
        <Grid VerticalAlignment="Bottom" Margin="100,0,100,40">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Current Time Label -->
            <TextBlock x:Name="CurrentTimeLabel" 
                       Grid.Column="0"
                       Text="0:00"
                       FontSize="14"
                       Foreground="#CCCCCC"
                       FontFamily="Segoe UI Variable"
                       VerticalAlignment="Center"
                       Margin="0,0,15,0"/>
            
            <!-- Original Progress Bar -->
            <ProgressBar x:Name="PlaybackProgressBar"
                         Grid.Column="1"
                         Height="8"
                         Minimum="0"
                         Maximum="1"
                         IsIndeterminate="False"
                         Background="Transparent"
                         Foreground="#FF1DB954"
                         BorderBrush="Transparent"
                         BorderThickness="0"
                         VerticalAlignment="Center">
                <ProgressBar.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="5"/>
                        <Setter Property="Background" Value="Transparent"/>
                    </Style>
                </ProgressBar.Resources>
                <ProgressBar.Template>
                    <ControlTemplate TargetType="ProgressBar">
                        <Border Background="#0000" BorderBrush="Transparent" BorderThickness="0" CornerRadius="5">
                            <Grid>
                                <Border x:Name="PART_Track" Background="#0000" CornerRadius="5" />
                                <Border x:Name="PART_Indicator" Background="{Binding Foreground, RelativeSource={RelativeSource TemplatedParent}}" CornerRadius="5"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </ProgressBar.Template>
            </ProgressBar>
            
            <!-- Total Time Label -->
            <TextBlock x:Name="TotalTimeLabel" 
                       Grid.Column="2"
                       Text="0:00"
                       FontSize="14"
                       Foreground="#CCCCCC"
                       FontFamily="Segoe UI Variable"
                       VerticalAlignment="Center"
                       Margin="15,0,0,0"/>
        </Grid>

        <!-- Next Song Banner -->
        <Border x:Name="NextSongBanner"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,100,100,0"
                MaxWidth="400"
                Background="#DD1A1A1A"
                CornerRadius="15"
                Padding="20,15,20,10"
                Visibility="Collapsed">
            <Border.Effect>
                <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.5"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Border Width="60" Height="60" CornerRadius="8" Margin="0,0,15,0">
                        <Image x:Name="NextAlbumCover" Stretch="UniformToFill"/>
                    </Border>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="UP NEXT" 
                                   FontSize="12" 
                                   Foreground="#AAAAAA" 
                                   FontFamily="Segoe UI Variable" 
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,5"/>
                        <TextBlock x:Name="NextTrackName" 
                                   FontSize="18" 
                                   Foreground="White" 
                                   FontFamily="Segoe UI Variable" 
                                   FontWeight="SemiBold"
                                   TextTrimming="CharacterEllipsis"/>
                        <TextBlock x:Name="NextArtistName" 
                                   FontSize="14" 
                                   Foreground="#DDDDDD" 
                                   FontFamily="Segoe UI Variable"
                                   TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                </Grid>
                
                <ProgressBar x:Name="NextSongProgressBar"
                             Grid.Row="1"
                             Height="4"
                             Margin="0,10,0,0"
                             Minimum="0"
                             Maximum="1"
                             Value="0"
                             Background="#33FFFFFF"
                             Foreground="White"
                             BorderThickness="0">
                    <ProgressBar.Template>
                        <ControlTemplate TargetType="ProgressBar">
                            <Border Background="{TemplateBinding Background}" CornerRadius="2">
                                <Grid>
                                    <Border x:Name="PART_Track" Background="{TemplateBinding Background}" CornerRadius="2"/>
                                    <Border x:Name="PART_Indicator" 
                                            Background="{TemplateBinding Foreground}" 
                                            HorizontalAlignment="Left"
                                            CornerRadius="2">
                                        <Border.RenderTransform>
                                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                                        </Border.RenderTransform>
                                    </Border>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </ProgressBar.Template>
                </ProgressBar>
            </Grid>
        </Border>

        <!-- Window Controls Panel (appears on hover) -->
        <Grid x:Name="WindowControlsPanel" 
              Visibility="Collapsed"
              HorizontalAlignment="Center"
              VerticalAlignment="Top"
              Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Move to Previous Monitor Button -->
            <Button x:Name="MoveToPreviousMonitorButton"
                    Grid.Column="0"
                    Content="◄"
                    Width="50"
                    Height="50"
                    Margin="5"
                    Click="MoveToPreviousMonitor_Click"
                    Style="{StaticResource WindowControlButtonStyle}"/>
            
            <!-- Minimize Button -->
            <Button x:Name="MinimizeButton"
                    Grid.Column="1"
                    Content="─"
                    Width="50"
                    Height="50"
                    Margin="5"
                    Click="MinimizeButton_Click"
                    Style="{StaticResource WindowControlButtonStyle}"/>
            
            <!-- Close Button -->
            <Button x:Name="CloseButton"
                    Grid.Column="2"
                    Content="✕"
                    Width="50"
                    Height="50"
                    Margin="5"
                    Click="CloseButton_Click"
                    Style="{StaticResource WindowControlButtonStyle}"/>
            
            <!-- Move to Next Monitor Button -->
            <Button x:Name="MoveToNextMonitorButton"
                    Grid.Column="3"
                    Content="►"
                    Width="50"
                    Height="50"
                    Margin="5"
                    Click="MoveToNextMonitor_Click"
                    Style="{StaticResource WindowControlButtonStyle}"/>
        </Grid>

    </Grid>
</Window>